/**
 * UNIVERSAL LAYOUT ENGINE
 * Mobile-first responsive system
 * Applies to all shells, pages, and components
 */

/* ============================================
   1. GLOBAL LAYOUT RESET & BASE
   ============================================ */

* {
  box-sizing: border-box;
  max-width: 100%;
}

html,
body {
  margin: 0;
  padding: 0;
  width: 100%;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

body {
  font-size: 15px;
  line-height: 1.5;
}

/* Tablet */
@media (min-width: 640px) {
  body {
    font-size: 16px;
  }
}

/* Desktop */
@media (min-width: 1024px) {
  body {
    font-size: 17px;
  }
}

/* ============================================
   2. BREAKPOINT SYSTEM (GLOBAL)
   ============================================ */

:root {
  --breakpoint-mobile: 0px;
  --breakpoint-tablet: 640px;
  --breakpoint-desktop: 1024px;
  --breakpoint-wide: 1280px;
  --breakpoint-ultra: 1600px;

  /* Spacing Tokens */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --spacing-2xl: 48px;
  --spacing-3xl: 64px;

  /* Wide Screen Spacing (increased by 12%) */
  --spacing-lg-wide: 28px;
  --spacing-xl-wide: 36px;
  --spacing-2xl-wide: 54px;
  --spacing-3xl-wide: 72px;

  /* Container Widths */
  --container-max-width: 1280px;
  --container-max-width-wide: 1440px;
  --container-max-width-ultra: 1600px;
  --container-padding: var(--spacing-md);

  /* Shell Sidebar Widths */
  --sidebar-width-desktop: 260px;
  --sidebar-width-wide: 280px;
  --sidebar-width-tablet: 200px;
  --sidebar-width-mobile: 100%;

  /* Header Heights */
  --header-height-mobile: 56px;
  --header-height-desktop: 64px;
  --header-height-wide: 72px;

  /* Bottom Nav Height */
  --bottom-nav-height: 56px;
}

/* ============================================
   3. FLUID CONTAINER SYSTEM
   ============================================ */

.layout-container {
  max-width: var(--container-max-width);
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--container-padding);
  padding-right: var(--container-padding);
}

@media (min-width: 640px) {
  .layout-container {
    --container-padding: var(--spacing-lg);
  }
}

@media (min-width: 1024px) {
  .layout-container {
    --container-padding: var(--spacing-xl);
  }
}

@media (min-width: 1280px) {
  .layout-container {
    max-width: var(--container-max-width-wide);
    --container-padding: var(--spacing-xl-wide);
  }
}

@media (min-width: 1600px) {
  .layout-container {
    max-width: var(--container-max-width-ultra);
  }
}

/* ============================================
   4. UNIVERSAL FLEX LAYOUT
   ============================================ */

.layout-shell {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  width: 100%;
  overflow-x: hidden;
}

.layout-shell__header {
  flex-shrink: 0;
  width: 100%;
}

.layout-shell__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow-x: hidden;
}

.layout-shell__main {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow-x: hidden;
}

/* ============================================
   5. RESPONSIVE GRID SYSTEM
   ============================================ */

.grid {
  display: grid;
  gap: var(--spacing-lg);
  width: 100%;
}

@media (min-width: 1280px) {
  .grid {
    gap: var(--spacing-lg-wide);
  }
}

/* Product Grid - Mobile First */
.grid--products {
  grid-template-columns: repeat(auto-fill, minmax(clamp(100px, 40vw, 140px), 1fr));
  gap: clamp(8px, 2vw, 24px);
}

@media (min-width: 640px) {
  .grid--products {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: var(--spacing-lg);
  }
}

@media (min-width: 1024px) {
  .grid--products {
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: var(--spacing-xl);
  }
}

@media (min-width: 1280px) {
  .grid--products {
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: var(--spacing-xl-wide);
  }
}

/* Responsive Column Grid */
.grid--1-col {
  grid-template-columns: 1fr;
}

.grid--2-col {
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

@media (min-width: 1280px) {
  .grid--2-col {
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  }
}

.grid--3-col {
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

@media (min-width: 1280px) {
  .grid--3-col {
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }
}

.grid--4-col {
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}

@media (min-width: 1280px) {
  .grid--4-col {
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }
}

.grid--5-col {
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}

@media (min-width: 1280px) {
  .grid--5-col {
    grid-template-columns: repeat(5, 1fr);
  }
}

/* ============================================
   6. OVERFLOW GUARDS
   ============================================ */

img,
video,
canvas,
svg {
  max-width: 100%;
  height: auto;
  display: block;
}

/* ============================================
   7. SIDEBAR LAYOUT (BusinessShell, AdminShell)
   ============================================ */

.layout-with-sidebar {
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow-x: hidden;
}

@media (min-width: 1024px) {
  .layout-with-sidebar {
    flex-direction: row;
  }
}

.layout-sidebar {
  width: 100%;
  flex-shrink: 0;
  overflow-x: hidden;
}

@media (min-width: 640px) {
  .layout-sidebar {
    width: var(--sidebar-width-tablet);
    min-width: var(--sidebar-width-tablet);
  }
}

@media (min-width: 1024px) {
  .layout-sidebar {
    width: var(--sidebar-width-desktop);
    min-width: var(--sidebar-width-desktop);
  }
}

@media (min-width: 1280px) {
  .layout-sidebar {
    width: var(--sidebar-width-wide);
    min-width: var(--sidebar-width-wide);
  }
}

.layout-sidebar-content {
  flex: 1;
  width: 100%;
  overflow-x: hidden;
}

/* ============================================
   8. PAGE STRUCTURE
   ============================================ */

.page-wrapper {
  display: flex;
  flex-direction: column;
  width: 100%;
  min-height: 100%;
  overflow-x: hidden;
}

.page-header {
  width: 100%;
  padding: var(--spacing-md);
  flex-shrink: 0;
}

@media (min-width: 640px) {
  .page-header {
    padding: var(--spacing-lg);
  }
}

@media (min-width: 1024px) {
  .page-header {
    padding: var(--spacing-xl);
  }
}

@media (min-width: 1280px) {
  .page-header {
    padding: var(--spacing-xl-wide);
  }
}

.page-section {
  width: 100%;
  padding: var(--spacing-lg) var(--spacing-md);
}

@media (min-width: 640px) {
  .page-section {
    padding: var(--spacing-xl) var(--spacing-lg);
  }
}

@media (min-width: 1024px) {
  .page-section {
    padding: var(--spacing-2xl) var(--spacing-xl);
  }
}

@media (min-width: 1280px) {
  .page-section {
    padding: var(--spacing-3xl-wide) var(--spacing-xl-wide);
  }
}

.page-body {
  flex: 1;
  width: 100%;
  overflow-x: hidden;
}

.page-footer {
  width: 100%;
  padding: var(--spacing-md);
  flex-shrink: 0;
}

/* ============================================
   9. CENTERED CARD LAYOUT (KYC, Modals)
   ============================================ */

.centered-card-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: var(--spacing-md);
  width: 100%;
}

.centered-card {
  width: 100%;
  max-width: 500px;
  margin: 0 auto;
}

/* ============================================
   9B. CONTENT WIDTH CONSTRAINTS (NEW)
   ============================================ */

/* Standard page content - max 1100px */
.content-max-standard {
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

/* Wide content - max 1300px (for dashboards) */
.content-max-wide {
  max-width: 1300px;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

/* Ultra wide - max 1500px (for data-heavy pages) */
.content-max-ultra {
  max-width: 1500px;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

/* Profile/Form content - narrow max 900px */
.content-max-narrow {
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
  padding-left: var(--spacing-lg);
  padding-right: var(--spacing-lg);
}

@media (min-width: 1280px) {
  .content-max-narrow {
    padding-left: var(--spacing-xl-wide);
    padding-right: var(--spacing-xl-wide);
  }
}

/* ============================================
   10. BOTTOM NAVIGATION (StoreShell, DriverShell)
   ============================================ */

.layout-with-bottom-nav {
  padding-bottom: var(--bottom-nav-height);
}

.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--bottom-nav-height);
  z-index: 100;
  width: 100%;
}

/* ============================================
   11. FLOATING ACTION BUTTON
   ============================================ */

.fab {
  position: fixed;
  bottom: calc(var(--bottom-nav-height) + var(--spacing-md));
  right: var(--spacing-md);
  z-index: 50;
}

@media (min-width: 640px) {
  .fab {
    bottom: var(--spacing-lg);
    right: var(--spacing-lg);
  }
}

/* ============================================
   12. TYPOGRAPHY RESPONSIVE SCALING
   ============================================ */

.heading-1 {
  font-size: 1.75rem;
  line-height: 1.2;
  font-weight: 700;
}

.heading-2 {
  font-size: 1.5rem;
  line-height: 1.3;
  font-weight: 600;
}

.heading-3 {
  font-size: 1.25rem;
  line-height: 1.4;
  font-weight: 600;
}

.heading-4 {
  font-size: 1.125rem;
  line-height: 1.4;
  font-weight: 500;
}

@media (min-width: 640px) {
  .heading-1 {
    font-size: 2rem;
  }
  .heading-2 {
    font-size: 1.75rem;
  }
  .heading-3 {
    font-size: 1.5rem;
  }
  .heading-4 {
    font-size: 1.25rem;
  }
}

@media (min-width: 1024px) {
  .heading-1 {
    font-size: 2.5rem;
  }
  .heading-2 {
    font-size: 2rem;
  }
  .heading-3 {
    font-size: 1.75rem;
  }
  .heading-4 {
    font-size: 1.5rem;
  }
}

@media (min-width: 1280px) {
  .heading-1 {
    font-size: 2.75rem;
  }
  .heading-2 {
    font-size: 2.25rem;
  }
  .heading-3 {
    font-size: 1.9rem;
  }
  .heading-4 {
    font-size: 1.6rem;
  }
}

/* ============================================
   13. VERTICAL RHYTHM
   ============================================ */

.stack-xs > * + * {
  margin-top: var(--spacing-xs);
}

.stack-sm > * + * {
  margin-top: var(--spacing-sm);
}

.stack-md > * + * {
  margin-top: var(--spacing-md);
}

.stack-lg > * + * {
  margin-top: var(--spacing-lg);
}

.stack-xl > * + * {
  margin-top: var(--spacing-xl);
}

/* ============================================
   14. ANTI-PATTERN PREVENTION
   ============================================ */

/* Remove all nested scroll containers by default */
.no-nested-scroll {
  overflow: visible;
}

/* Prevent horizontal overflow everywhere */
.prevent-overflow {
  overflow-x: hidden;
  max-width: 100%;
}

/* Text wrapping fixes */
.wrap-text {
  white-space: normal;
  word-break: break-word;
  overflow-wrap: break-word;
}

/* ============================================
   15. UTILITY CLASSES
   ============================================ */

.mobile-only {
  display: block;
}

@media (min-width: 640px) {
  .mobile-only {
    display: none;
  }
}

.tablet-up {
  display: none;
}

@media (min-width: 640px) {
  .tablet-up {
    display: block;
  }
}

.desktop-only {
  display: none;
}

@media (min-width: 1024px) {
  .desktop-only {
    display: block;
  }
}

/* ============================================
   16. RESPONSIVE PAGE LAYOUT UTILITIES
   ============================================ */

/* Two-column layout: sidebar + content */
.layout-two-column {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
  width: 100%;
}

@media (min-width: 768px) {
  .layout-two-column {
    grid-template-columns: 300px 1fr;
  }
}

@media (min-width: 1024px) {
  .layout-two-column {
    grid-template-columns: 350px 1fr;
  }
}

@media (min-width: 1280px) {
  .layout-two-column {
    grid-template-columns: 380px 1fr;
    gap: var(--spacing-2xl-wide);
  }
}

/* Three-column layout */
.layout-three-column {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-lg);
}

@media (min-width: 1024px) {
  .layout-three-column {
    grid-template-columns: 1fr 2fr 1fr;
    gap: var(--spacing-xl);
  }
}

@media (min-width: 1280px) {
  .layout-three-column {
    gap: var(--spacing-xl-wide);
  }
}

/* Stacked sections with proper spacing */
.layout-stacked {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

@media (min-width: 1280px) {
  .layout-stacked {
    gap: var(--spacing-2xl-wide);
  }
}

/* Side-by-side sections */
.layout-side-by-side {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-lg);
}

@media (min-width: 1024px) {
  .layout-side-by-side {
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xl);
  }
}

@media (min-width: 1280px) {
  .layout-side-by-side {
    gap: var(--spacing-xl-wide);
  }
}

/* ============================================
   17. PAGE PADDING UTILITY
   ============================================ */

.page-padding {
  padding: var(--spacing-lg);
}

@media (min-width: 640px) {
  .page-padding {
    padding: var(--spacing-xl);
  }
}

@media (min-width: 1024px) {
  .page-padding {
    padding: var(--spacing-2xl);
  }
}

@media (min-width: 1280px) {
  .page-padding {
    padding: var(--spacing-3xl-wide);
  }
}

/* ============================================
   18. SPACING UTILITY CLASSES
   ============================================ */

/* Margin Utilities */
.m-0 { margin: 0; }
.m-xs { margin: var(--spacing-xs); }
.m-sm { margin: var(--spacing-sm); }
.m-md { margin: var(--spacing-md); }
.m-lg { margin: var(--spacing-lg); }
.m-xl { margin: var(--spacing-xl); }
.m-2xl { margin: var(--spacing-2xl); }

.mx-auto { margin-left: auto; margin-right: auto; }
.my-xs { margin-top: var(--spacing-xs); margin-bottom: var(--spacing-xs); }
.my-sm { margin-top: var(--spacing-sm); margin-bottom: var(--spacing-sm); }
.my-md { margin-top: var(--spacing-md); margin-bottom: var(--spacing-md); }
.my-lg { margin-top: var(--spacing-lg); margin-bottom: var(--spacing-lg); }
.my-xl { margin-top: var(--spacing-xl); margin-bottom: var(--spacing-xl); }

.mt-xs { margin-top: var(--spacing-xs); }
.mt-sm { margin-top: var(--spacing-sm); }
.mt-md { margin-top: var(--spacing-md); }
.mt-lg { margin-top: var(--spacing-lg); }
.mt-xl { margin-top: var(--spacing-xl); }

.mb-xs { margin-bottom: var(--spacing-xs); }
.mb-sm { margin-bottom: var(--spacing-sm); }
.mb-md { margin-bottom: var(--spacing-md); }
.mb-lg { margin-bottom: var(--spacing-lg); }
.mb-xl { margin-bottom: var(--spacing-xl); }

/* Padding Utilities */
.p-0 { padding: 0; }
.p-xs { padding: var(--spacing-xs); }
.p-sm { padding: var(--spacing-sm); }
.p-md { padding: var(--spacing-md); }
.p-lg { padding: var(--spacing-lg); }
.p-xl { padding: var(--spacing-xl); }
.p-2xl { padding: var(--spacing-2xl); }

.px-xs { padding-left: var(--spacing-xs); padding-right: var(--spacing-xs); }
.px-sm { padding-left: var(--spacing-sm); padding-right: var(--spacing-sm); }
.px-md { padding-left: var(--spacing-md); padding-right: var(--spacing-md); }
.px-lg { padding-left: var(--spacing-lg); padding-right: var(--spacing-lg); }

.py-xs { padding-top: var(--spacing-xs); padding-bottom: var(--spacing-xs); }
.py-sm { padding-top: var(--spacing-sm); padding-bottom: var(--spacing-sm); }
.py-md { padding-top: var(--spacing-md); padding-bottom: var(--spacing-md); }
.py-lg { padding-top: var(--spacing-lg); padding-bottom: var(--spacing-lg); }
.py-xl { padding-top: var(--spacing-xl); padding-bottom: var(--spacing-xl); }

/* Gap Utilities */
.gap-xs { gap: var(--spacing-xs); }
.gap-sm { gap: var(--spacing-sm); }
.gap-md { gap: var(--spacing-md); }
.gap-lg { gap: var(--spacing-lg); }
.gap-xl { gap: var(--spacing-xl); }
.gap-2xl { gap: var(--spacing-2xl); }

/* ============================================
   19. IMPROVED GRID SPACING
   ============================================ */

/* Card spacing improvements */
.grid--cards {
  display: grid;
  gap: var(--spacing-lg);
}

@media (min-width: 640px) {
  .grid--cards {
    gap: var(--spacing-xl);
  }
}

@media (min-width: 1280px) {
  .grid--cards {
    gap: var(--spacing-xl-wide);
  }
}

/* ============================================
   20. SECTION SPACING UTILITIES
   ============================================ */

/* Space between major page sections */
.section-spacing-sm {
  margin-bottom: var(--spacing-md);
}

.section-spacing-md {
  margin-bottom: var(--spacing-lg);
}

.section-spacing-lg {
  margin-bottom: var(--spacing-xl);
}

.section-spacing-xl {
  margin-bottom: var(--spacing-2xl);
}

@media (min-width: 1280px) {
  .section-spacing-lg {
    margin-bottom: var(--spacing-xl-wide);
  }
  .section-spacing-xl {
    margin-bottom: var(--spacing-2xl-wide);
  }
}

/* ============================================
   21. COMPONENT SPACING UTILITIES
   ============================================ */

/* Button groups - consistent spacing between buttons */
.button-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.button-group--horizontal {
  flex-direction: row;
  gap: var(--spacing-md);
}

@media (min-width: 640px) {
  .button-group--horizontal {
    gap: var(--spacing-lg);
  }
}

/* Form groups - vertical spacing between form elements */
.form-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
}

.form-group__label {
  margin-bottom: var(--spacing-xs);
}

.form-group__input {
  margin-bottom: 0;
}

.form-group__hint {
  margin-top: var(--spacing-xs);
  font-size: 0.875rem;
  opacity: 0.7;
}

/* List item spacing */
.list-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.list-group__item {
  padding: var(--spacing-md);
}

@media (min-width: 640px) {
  .list-group {
    gap: var(--spacing-lg);
  }
  .list-group__item {
    padding: var(--spacing-lg);
  }
}

/* Card grid with proper margins */
.card-grid {
  display: grid;
  gap: var(--spacing-md);
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .card-grid {
    gap: var(--spacing-lg);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }
}

@media (min-width: 1024px) {
  .card-grid {
    gap: var(--spacing-xl);
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  }
}

@media (min-width: 1280px) {
  .card-grid {
    gap: var(--spacing-xl-wide);
  }
}

/* ============================================
   22. FLEX/GRID SPACING PRESETS
   ============================================ */

/* Flex layouts with consistent gaps */
.flex-gap-xs { display: flex; gap: var(--spacing-xs); }
.flex-gap-sm { display: flex; gap: var(--spacing-sm); }
.flex-gap-md { display: flex; gap: var(--spacing-md); }
.flex-gap-lg { display: flex; gap: var(--spacing-lg); }
.flex-gap-xl { display: flex; gap: var(--spacing-xl); }

.flex-gap-md-col {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.flex-gap-lg-col {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.flex-gap-xl-col {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xl);
}

/* ============================================
   23. BADGE & LABEL SPACING
   ============================================ */

.badge-container {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
}

.badge-container--lg {
  gap: var(--spacing-md);
}

/* ============================================
   24. SEARCH & FILTER SPACING
   ============================================ */

.search-container {
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

@media (min-width: 640px) {
  .search-container {
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
  }
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
}

@media (min-width: 640px) {
  .filter-group {
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
  }
}

.filter-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}
